/**
 * @file
 * Provides Media module integration.
 */

!function(a){"use strict";Drupal.behaviors.slickMedia={attach:function(e){a(".media--switch--player",e).once("slick-media",function(){var e=a(this),i=e.closest(".slick__slider"),s=e.find("iframe"),l=s.clone(),n=l.data("media"),o=l.data("lazy");s.remove(),e.on("click.media-play",".media-icon--play",function(){a(this);return""===o?!1:("soundcloud"===n.scheme?(o.indexOf("auto_play")<0||o.indexOf("auto_play")===!1)&&(o=o.indexOf("?")<0?o+"?auto_play=true":o+"&auto_play=true"):(o.indexOf("autoplay")<0||0===o.indexOf("autoplay"))&&(o=o.indexOf("?")<0?o+"?autoplay=1":o+"&autoplay=1"),e.removeClass("is-playing"),a(".is-paused").removeClass("is-paused"),i.addClass("is-paused").slick("slickPause"),e.addClass("is-playing").append(l),l.attr("src",o),!1)}),e.on("click.media-close",".media-icon--close",function(){return e.removeClass("is-playing").find("iframe").remove(),a(".is-paused").removeClass("is-paused"),!1}),i.on("afterChange",function(){i.find(".is-playing .media-icon--close").trigger("click.media-close")})})}}}(jQuery);
